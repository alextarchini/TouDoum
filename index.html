<!doctype html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap tutorial for begineers</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <!--     <link rel="stylesheet" href="./eg3.css"> -->
    <link href="CustomStyles.css" rel="stylesheet" />
</head>

<body>

    <h1 style="color:red"> TouDoum</h1>
    <p>Choose the movie you want to watch</p>
    <br />
    <div class="container">
        <div class="row">
            <div class="col-xs-12">

                <div id="imageCarousel" class="carousel slide" data-interval="2000" data-ride="carousel"
                    data-pause="hover" data-wrap="true">

                    <ol class="carousel-indicators">
                        <li data-target="#imageCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#imageCarousel" data-slide-to="1"></li>
                        <li data-target="#imageCarousel" data-slide-to="2"></li>
                        <!--                         <li data-target="#imageCarousel" data-slide-to="3"></li> -->
                    </ol>

                    <div class="carousel-inner">
                        <!-- Series 1 -->
                        <div class="item active">
                            <div class="row">
                                <div class="col-xs-4">
                                    <img src="./images/img1.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>title</h3>
                                        <p class="overview">summary</p>
                                    </div>
                                </div>
                                <div class="col-xs-4">
                                    <img src="./images/img2.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Jellyfish</h3>
                                        <p>Jellyfish Image Description</p>
                                    </div>
                                </div>
                                <div class="col-xs-4">
                                    <img src="./images/img2.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Penguins</h3>
                                        <p>Penguins Image Description</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Series 2 -->
                        <div class="item">
                            <div class="row">
                                <!-- image1 -->
                                <div class="col-xs-4">
                                    <img src="./images/img2.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Lighthouse</h3>
                                        <p>Lighthouse Image Description</p>
                                    </div>
                                </div>
                                <!-- img2 -->
                                <div class="col-xs-4">
                                    <img src="./images/img2.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Hydrangeas</h3>
                                        <p>Hydrangeas Image Description</p>
                                    </div>
                                </div>
                                <!-- img3 -->
                                <div class="col-xs-4">
                                    <img src="./images/img21.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Koala</h3>
                                        <p>Koala Image Description</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- series 2 -->
                        <div class="item">
                            <div class="row">
                                <div class="col-xs-4">
                                    <img src="./images/img22.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Tulips</h3>
                                        <p>Tulips Image Description</p>
                                    </div>
                                </div>
                                <div class="col-xs-4">
                                    <img src="./images/img27.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Chrysanthemum</h3>
                                        <p>Chrysanthemum Image Description</p>
                                    </div>
                                </div>
                                <div class="col-xs-4">
                                    <img src="./images/img29.jpg" class="img-responsive">
                                    <div class="carousel-caption">
                                        <h3>Stripes</h3>
                                        <p>Stripes Image Description</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END OF SERIES -->

                    <!-- NAVIGATION -->
                    <a href="#imageCarousel" class="carousel-control left" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                    </a>
                    <a href="#imageCarousel" class="carousel-control right" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                    </a>
                </div>

            </div>
        </div>
    </div>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
    </script>
    <script src="bootstrap/js/bootstrap.min.js"></script>

    <!-- API connection -->
    <script>
        /* CONNECT TO THE API */

        /* CHECK VARS: https://api.themoviedb.org/3/discover/movie?api_key=b53ba6ff46235039543d199b7fdebd90&language=en-US   */
        console.log(document.getElementsByClassName("tile_title"));
        function getApi() {
            //CONNECT to the API Database - do this only here once
            fetch("https://api.themoviedb.org/3/discover/movie?api_key=b53ba6ff46235039543d199b7fdebd90&language=en-US")
                .then(response => response.json()) //translate into Json
                .then(data => //opens another function 
                {
                    //don't forget to call the functions below in here!!
                    /* ADD ALL FUNCTION CREATED BELOW IN HERE!!! ... */
                    getImage(data.results);
                    getTitle(data.results);
                    getOverview(data.results);
                    /*                  getAverage(data.results); */

                })
        }
        getApi();


        //create the function get movie image
        function getImage(movies) {
            //loop
            for (let i = 0; i < movies.length; i++) {
                document.getElementsByTagName("img")[i].src = `https://image.tmdb.org/t/p/w200/${movies[i].poster_path}`;
            }
        }
        //call the function up  getApi();


        /* NAME */
        //create a function and give it an argument from the API
        function getTitle(movies) {
            //same line
            for (let i = 0; i < movies.length; i++) {
                //to get the var names in the API - go here: https://api.themoviedb.org/3/discover/movie?api_key=b53ba6ff46235039543d199b7fdebd90&language=en-US
                document.getElementsByTagName("h3")[i].textContent = movies[i].title;
            }
            //call the function up  getTitle();
        }

        /* Overview*/
        //create a function and give it an argument from the API
        function getOverview(movies) {
            //same line
            for (let i = 0; i < movies.length; i++) {
                //to get the var names in the API - go here: https://api.themoviedb.org/3/discover/movie?api_key=b53ba6ff46235039543d199b7fdebd90&language=en-US
                document.getElementsByClassName("overview")[i].textContent = movies[i].overview;
            }
            //call the function up  getTitle();
        }
    </script>


    <!-- POP-UP IMAGE - JS TO BE REWOREKD - VAR in API is - poster_path -->
    <script>
        // Container we'll use to show an image
        let image_popup = document.querySelector('.image-popup');
        // Loop each image so we can add the on click event
        document.querySelectorAll('.images a').forEach(img_link => {
            img_link.onclick = e => {
                e.preventDefault();
                let img_meta = img_link.querySelector('img');
                let img = new Image();
                img.onload = () => {
                    // Create the pop out image
                    //MAKE A LINK bn watch noe and trailer page!!!
                    image_popup.innerHTML = `
                        <div class="con">
                            <h3>${img_meta.dataset.title}</h3>
                            <p>${img_meta.alt}</p>
                            <img src="${img.src}" width="${img.width}" height="${img.height}">
                            <a href="#" class="watch" style="text-decoration:none; color:red" title="Watch"><i class="fas fa-tv fa-2x" style="margin:10; color:red"></i> Watch Now</a>
                        </div>
                    `;
                    image_popup.style.display = 'flex';
                };
                img.src = img_meta.src;
            };
        });
        // Hide the image popup container if user clicks outside the image
        image_popup.onclick = e => {
            if (e.target.className == 'image-popup') {
                image_popup.style.display = "none";
            }
        };
    </script>

</body>

</html>